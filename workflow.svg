<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"><svg xmlns="http://www.w3.org/2000/svg" width="756" height="1162" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[CLI->API: $ setops login
API-->CLI: Session Token
CLI->API: $ setops stage:create production
Note right of API: Creates stage config,\nstores it,\ncommits
API->AWS: $ terraform apply
AWS-->API: ok
API-->CLI: ok
CLI->API: $ setops app:create web
Note right of API: Adds app:create web\nto command queue
Note right of API: Command Queue:\n1. app:create web
API-->CLI: ok
CLI->API: $ setops app:command:set bin/rails server
Note right of API: Adds app:command:set\nto command queue
Note right of API: Command Queue:\n1. app:create web\n2. app:command:set
API-->CLI: ok
CLI->API: $ setops commit
Note right of API: Updates working copy\nof stage config with\ncommands from queue,\ncommits
API->AWS: $ terraform apply
AWS-->API: ok
API-->CLI: ok]]></source><desc></desc><defs><marker viewBox="0 0 5 5" markerWidth="5" markerHeight="5" orient="auto" refX="5" refY="2.5" id="markerArrowBlock"><path d="M 0 0 L 5 2.5 L 0 5 z"></path></marker><marker viewBox="0 0 9.6 16" markerWidth="4" markerHeight="16" orient="auto" refX="9.6" refY="8" id="markerArrowOpen"><path d="M 9.6,8 1.92,16 0,13.7 5.76,8 0,2.286 1.92,0 9.6,8 z"></path></marker></defs><g class="title"></g><g class="actor"><rect x="10" y="20" width="48.90625" height="38.671875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="20" y="44.671875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="20">CLI</tspan></text></g><g class="actor"><rect x="10" y="1104.140625" width="48.90625" height="38.671875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="20" y="1128.8125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="20">CLI</tspan></text></g><line x1="34.453125" x2="34.453125" y1="58.671875" y2="1104.140625" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="424.9765625" y="20" width="49.578125" height="38.671875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="435.6484375" y="44.671875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="434.9765625">API</tspan></text></g><g class="actor"><rect x="424.9765625" y="1104.140625" width="49.578125" height="38.671875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="435.6484375" y="1128.8125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="434.9765625">API</tspan></text></g><line x1="449.765625" x2="449.765625" y1="58.671875" y2="1104.140625" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="677.2734375" y="20" width="49.578125" height="38.671875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="687.9453125" y="44.671875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="687.2734375">AWS</tspan></text></g><g class="actor"><rect x="677.2734375" y="1104.140625" width="49.578125" height="38.671875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="687.9453125" y="1128.8125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="687.2734375">AWS</tspan></text></g><line x1="702.0625" x2="702.0625" y1="58.671875" y2="1104.140625" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="signal"><text x="174.6796875" y="89.0078125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="174.6796875">$ setops login</tspan></text><line x1="34.453125" x2="449.765625" y1="97.34375" y2="97.34375" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="179.4921875" y="127.6796875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="179.4921875">Session Token</tspan></text><line x1="449.765625" x2="34.453125" y1="136.015625" y2="136.015625" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="87.984375" y="166.3515625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="87.984375">$ setops stage:create production</tspan></text><line x1="34.453125" x2="449.765625" y1="174.6875" y2="174.6875" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="469.765625" y="194.6875" width="212.296875" height="67.078125" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="474.765625" y="214.359375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="474.765625">Creates stage config,</tspan><tspan dy="1.2em" x="474.765625">stores it,</tspan><tspan dy="1.2em" x="474.765625">commits</tspan></text></g><g class="signal"><text x="493.8515625" y="292.1015625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="493.8515625">$ terraform apply</tspan></text><line x1="449.765625" x2="702.0625" y1="300.4375" y2="300.4375" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="565.7578125" y="330.7734375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="565.7578125">ok</tspan></text><line x1="702.0625" x2="449.765625" y1="339.109375" y2="339.109375" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="231.953125" y="369.4453125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="231.953125">ok</tspan></text><line x1="449.765625" x2="34.453125" y1="377.78125" y2="377.78125" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="131.1484375" y="408.1171875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="131.1484375">$ setops app:create web</tspan></text><line x1="34.453125" x2="449.765625" y1="416.453125" y2="416.453125" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="469.765625" y="436.453125" width="194.0625" height="47.875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="475.4375" y="456.125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="474.765625">Adds app:create web</tspan><tspan dy="1.2em" x="474.765625">to command queue</tspan></text></g><g class="note"><rect x="469.765625" y="504.328125" width="174.125" height="47.875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="474.765625" y="524" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="474.765625">Command Queue:</tspan><tspan dy="1.2em" x="474.765625">1. app:create web</tspan></text></g><g class="signal"><text x="231.953125" y="582.5390625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="231.953125">ok</tspan></text><line x1="449.765625" x2="34.453125" y1="590.875" y2="590.875" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="44.453125" y="621.2109375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="44.453125">$ setops app:command:set bin/rails server</tspan></text><line x1="34.453125" x2="449.765625" y1="629.546875" y2="629.546875" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="469.765625" y="649.546875" width="203.328125" height="47.875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="475.4375" y="669.21875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="474.765625">Adds app:command:set</tspan><tspan dy="1.2em" x="474.765625">to command queue</tspan></text></g><g class="note"><rect x="469.765625" y="717.421875" width="183.390625" height="67.078125" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="474.765625" y="737.09375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="474.765625">Command Queue:</tspan><tspan dy="1.2em" x="474.765625">1. app:create web</tspan><tspan dy="1.2em" x="474.765625">2. app:command:set</tspan></text></g><g class="signal"><text x="231.953125" y="814.8359375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="231.953125">ok</tspan></text><line x1="449.765625" x2="34.453125" y1="823.171875" y2="823.171875" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="169.859375" y="853.5078125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="169.859375">$ setops commit</tspan></text><line x1="34.453125" x2="449.765625" y1="861.84375" y2="861.84375" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="469.765625" y="881.84375" width="203.03125" height="86.28125" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="474.765625" y="901.515625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="474.765625">Updates working copy</tspan><tspan dy="1.2em" x="474.765625">of stage config with</tspan><tspan dy="1.2em" x="474.765625">commands from queue,</tspan><tspan dy="1.2em" x="474.765625">commits</tspan></text></g><g class="signal"><text x="493.8515625" y="998.4609375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="493.8515625">$ terraform apply</tspan></text><line x1="449.765625" x2="702.0625" y1="1006.796875" y2="1006.796875" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="565.7578125" y="1037.1328125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="565.7578125">ok</tspan></text><line x1="702.0625" x2="449.765625" y1="1045.46875" y2="1045.46875" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="231.953125" y="1075.8046875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="231.953125">ok</tspan></text><line x1="449.765625" x2="34.453125" y1="1084.140625" y2="1084.140625" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g></svg>